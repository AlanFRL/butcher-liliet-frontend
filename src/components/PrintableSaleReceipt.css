/* =========================
   PRINT (XPrinter XP-80T)
   72mm width, 48 chars/line
   ========================= */
@media print {
  :root {
    --scale-factor: 1.0;
  }

  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    box-sizing: border-box !important;
  }

  @page {
    size: 70mm auto !important;
    margin: 0 !important;
  }

  html, body {
    margin: 0 !important;
    padding: 0 !important;
    width: 70mm !important;
    background: #fff !important;
    overflow: visible !important;
    height: auto !important;
  }

  /* Ocultar ABSOLUTAMENTE TODO */
  body, body * { 
    visibility: hidden !important; 
  }
  
  /* Solo hacer visible el recibo marcado como printable */
  .printable-sale-receipt[data-printable="true"],
  .printable-sale-receipt[data-printable="true"] * { 
    visibility: visible !important; 
  }

  /* Wrapper: anclado arriba-izquierda SOLO para el recibo marcado como printable */
  .printable-sale-receipt[data-printable="true"] {
    position: fixed !important;
    left: 0 !important;
    top: 0 !important;

    width: 70mm !important;
    max-width: 70mm !important;

    margin: 0 !important;
    padding: 0 !important;
    background: #fff !important;

    transform-origin: top left !important;
    transform: scaleX(var(--scale-factor)) !important;
    z-index: 999999 !important;
  }
  
  /* Recibos NO printable no deben ser visibles ni tener position fixed */
  .printable-sale-receipt:not([data-printable="true"]),
  .printable-sale-receipt:not([data-printable="true"]) * {
    visibility: hidden !important;
    position: static !important;
  }

  .printable-sale-receipt__inner {
    width: 100% !important;
    max-width: 100% !important;
    padding: 2mm !important;
    box-sizing: border-box !important;

    font-family: "Courier New", monospace !important;
    font-size: 10pt !important;
    font-weight: 600 !important;
    line-height: 1.22 !important;

    background: #fff !important;
    font-variant-numeric: tabular-nums !important;
  }

  /* Tipografías */
  .printable-sale-receipt__inner h1 {
    font-size: 12pt !important;
    font-weight: 700 !important;
    margin: 0 0 1.4mm 0 !important;
    letter-spacing: 0.2px !important;
  }

  .printable-sale-receipt__inner .text-xs { font-size: 9pt !important; }
  .printable-sale-receipt__inner .text-base { font-size: 10pt !important; }
  .printable-sale-receipt__inner .text-lg { font-size: 11pt !important; }

  /* Espaciados compactos */
  .printable-sale-receipt__inner .mb-4 { margin-bottom: 1.6mm !important; }
  .printable-sale-receipt__inner .mb-3 { margin-bottom: 1.2mm !important; }
  .printable-sale-receipt__inner .mb-2 { margin-bottom: 0.9mm !important; }
  .printable-sale-receipt__inner .mb-1 { margin-bottom: 0.6mm !important; }
  .printable-sale-receipt__inner .mt-4 { margin-top: 1.6mm !important; }
  .printable-sale-receipt__inner .mt-2 { margin-top: 0.9mm !important; }
  .printable-sale-receipt__inner .pb-3 { padding-bottom: 1.2mm !important; }
  .printable-sale-receipt__inner .pb-2 { padding-bottom: 0.9mm !important; }

  /* Bordes más finos y limpios */
  .printable-sale-receipt__inner .border-b-2 { border-bottom-width: 0.45mm !important; }
  .printable-sale-receipt__inner .border-b { border-bottom-width: 0.25mm !important; }

  /* Evitar desbordes en flex */
  .printable-sale-receipt__inner .flex { min-width: 0 !important; }
  .printable-sale-receipt__inner .flex > * { min-width: 0 !important; }

  .printable-sale-receipt__inner .flex > span:last-child {
    flex: 0 0 auto !important;
    white-space: nowrap !important;
    text-align: right !important;
  }

  .printable-sale-receipt__inner .flex > span:first-child {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }

  .no-print { display: none !important; }
}

/* =========================
   SCREEN (preview UI)
   ========================= */
@media screen {
  .printable-sale-receipt {
    max-width: 70mm;
    margin: 0 auto;
    background: white;
  }
  .printable-sale-receipt__inner {
    padding: 2mm;
  }
}
